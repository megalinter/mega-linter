<!-- markdownlint-disable MD033 MD041 -->
<!-- Generated by .automation/build.py, please do not update manually -->
# <a href="https://forcedotcom.github.io/sfdx-scanner/" target="blank" title="Visit linter Web Site"><img src="https://forcedotcom.github.io/sfdx-scanner/assets/images/sfdx_scanner_logo.png" alt="sfdx-scanner" height="100px" class="megalinter-logo"></a>sfdx-scanner

sfdx-scanner is a sfdx plugin scanning apex and triggers using Apex PMD, and javascript using eslint
If your root folder is not **force-app**, please set variable SALESFORCE_SFDX_SCANNER_DIRECTORY

## sfdx-scanner documentation

- Version in Mega-Linter: **2.4.0**
- Visit [Official Web Site](https://forcedotcom.github.io/sfdx-scanner/){target=_blank}
- See [How to configure sfdx-scanner rules](https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html){target=_blank}
- See [How to disable sfdx-scanner rules in files](https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html){target=_blank}
- See [Index of problems detected by sfdx-scanner](https://pmd.github.io/latest/pmd_rules_apex.html){target=_blank}

[![sfdx-scanner - GitHub](https://gh-card.dev/repos/forcedotcom/sfdx-scanner.svg?fullname=)](https://github.com/forcedotcom/sfdx-scanner){target=_blank}

## Configuration in Mega-Linter

- Enable sfdx-scanner by adding `SALESFORCE_SFDX_SCANNER` in [ENABLE_LINTERS variable](/configuration/#activation-and-deactivation)
- Disable sfdx-scanner by adding `SALESFORCE_SFDX_SCANNER` in [DISABLE_LINTERS variable](/configuration/#activation-and-deactivation)

| Variable | Description | Default value |
| ----------------- | -------------- | -------------- |
| SALESFORCE_SFDX_SCANNER_ARGUMENTS | User custom arguments to add in linter CLI call<br/>Ex: `-s --foo "bar"` |  |
| SALESFORCE_SFDX_SCANNER_FILTER_REGEX_INCLUDE | Custom regex including filter<br/>Ex: `\/(src\|lib)\/` | Include every file |
| SALESFORCE_SFDX_SCANNER_FILTER_REGEX_EXCLUDE | Custom regex excluding filter<br/>Ex: `\/(test\|examples)\/` | Exclude no file |
| SALESFORCE_SFDX_SCANNER_DISABLE_ERRORS | Run linter but disable crash if errors found | `false` |
| SALESFORCE_DIRECTORY | Directory containing SALESFORCE files | `force-app` |

## IDE Integration

Use sfdx-scanner in your favorite IDE to catch errors before Mega-Linter !

| <!-- --> | IDE | Extension Name |
| :--: | ----------------- | -------------- |
| <img src="https://github.com/nvuillam/mega-linter/raw/master/docs/assets/icons/eclipse.ico" alt="" height="32px" class="megalinter-icon"></a> | [Eclipse](https://www.eclipse.org/) | [pmd-eclipse-plugin](https://github.com/pmd/pmd-eclipse-plugin) |
| <img src="https://github.com/nvuillam/mega-linter/raw/master/docs/assets/icons/emacs.ico" alt="" height="32px" class="megalinter-icon"></a> | [Emacs](https://www.gnu.org/software/emacs/) | [pmd-emacs](https://github.com/pmd/pmd-emacs/) |
| <img src="https://github.com/nvuillam/mega-linter/raw/master/docs/assets/icons/idea.ico" alt="" height="32px" class="megalinter-icon"></a> | [IDEA](https://www.jetbrains.com/products.html#type=ide) | [PMD IntelliJ](https://github.com/amitdev/PMD-Intellij) |
| <img src="https://github.com/nvuillam/mega-linter/raw/master/docs/assets/icons/vscode.ico" alt="" height="32px" class="megalinter-icon"></a> | [Visual Studio Code](https://code.visualstudio.com/) | [Salesforce Extension Pack](https://marketplace.visualstudio.com/items?itemName=salesforce.salesforcedx-vscode) |

## Behind the scenes

### How are identified applicable files

<!-- markdownlint-disable -->
<!-- /* cSpell:disable */ -->

### Example calls

```shell
sfdx scanner:run
```


### Help content

```shell
evaluate a selection of rules against a codebase

USAGE
  $ sfdx scanner:run [-c <array>] [-r <array>] [-e <array>] [-t <array> |
  undefined] [-f csv|html|json|junit|table|xml] [-o <string>] [--tsconfig
  <string>] [--env <string>] [-v | --json] [--verbose] [--loglevel
  trace|debug|info|warn|error|fatal|TRACE|DEBUG|INFO|WARN|ERROR|FATAL]

OPTIONS
  -c, --category=category
      categor(ies) of rules to run

  -e, --engine=engine
      engine(s) to run

  -f, --format=(csv|html|json|junit|table|xml)
      format of results

  -o, --outfile=outfile
      location of output file

  -r, --ruleset=ruleset
      [deprecated] ruleset(s) of rules to run

  -t, --target=target
      location of source code

  -v, --violations-cause-error
      throws an error when violations are detected

  --env=env
      JSON-formatted string, overrides ESLint's default environment variables

  --json
      format output as json

  --loglevel=(trace|debug|info|warn|error|fatal|TRACE|DEBUG|INFO|WARN|ERROR|FATA
  L)
      [default: warn] logging level for this command invocation

  --tsconfig=tsconfig
      location of tsconfig.json file

  --verbose
      emit additional command output to stdout

EXAMPLE
  Invoking without specifying any rules causes all rules to be run.
    E.g., $ sfdx scanner:run --format xml --target "somefile.js"
      Evaluates all rules against somefile.js.

    Specifying multiple categories or rulesets is treated as a logical OR.
      E.g., $ sfdx scanner:run --format xml --target "somefile.js" --category
  "Design,Best Practices" --ruleset "Braces"
        Evaluates all rules in the Design and Best Practices categories, and all rules
  in the Braces ruleset.

    Wrap globs in quotes.
      Unix example:    $ sfdx scanner:run --target './**/*.js,!./**/IgnoreMe.js' ...
      Windows example: > sfdx scanner:run --target ".\**\*.js,!.\**\IgnoreMe.js" ...
        Evaluate rules against all .js files below the current directory, except for
  IgnoreMe.js.

    Specify tsconfig.json if the current working directory does not contain the
  tsconfig.json that corresponds to the TypeScript files being scanned.
      E.g., sfdx scanner:run --target "/my-project/**/*.ts" --tsconfig
  "/my-project/tsconfig.json"
        Scans the project contained in '/my-project' if the current working directory
  is another directory.

    Use --env to override the default ESLint environment variables to add
  frameworks.
      E.g., $ sfdx scanner:run --target "somefile.js" --env '{"jasmine": true}'
        Evaluates rules against somefile.js, including Jasmine in the environment
  variables.

    Use --violations-cause-error to throw exit with a non-zero code when
  violations are found.
      E.g., $ sfdx scanner:run --target "somefile.js" --violations-cause-error
        Evaluates rules against somefile.js. If any rules are violated, the exit code
  will be the severity of the most severe violation.

    Use --engine to include or exclude engines. Any engine listed will be run,
  regardless of its current 'disabled' attribute.
      E.g., $ sfdx scanner:run --target "somefile.js" --engine "eslint-lwc,pmd"
        Evaluates rules against somefile.js, using eslint-lwc and pmd engines.


 »   Error: EEXIT: 0
 »   Code: EEXIT
```

### Installation on mega-linter Docker image

- Dockerfile commands :
```dockerfile
RUN sfdx plugins:install @salesforce/sfdx-scanner
```

