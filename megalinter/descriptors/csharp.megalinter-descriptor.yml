descriptor_id: CSHARP
descriptor_label: "C#"
descriptor_type: language
descriptor_flavors:
  - dotnet
file_extensions:
  - ".cs"
install:
  apk:
    - icu-libs
    - libcurl
    - libintl
    - libssl1.1
    - libstdc++
    - lttng-ust-dev
    - zlib
    - zlib-dev
  dockerfile:
    - |
      RUN wget --tries=5 -q -O dotnet-install.sh https://dot.net/v1/dotnet-install.sh \
          && chmod +x dotnet-install.sh \
          && ./dotnet-install.sh --install-dir /usr/share/dotnet -channel 5.0 -version latest
    - ENV PATH="${PATH}:/root/.dotnet/tools:/usr/share/dotnet"
linters:
  # DOTNET FORMAT
  - class: DotnetFormatLinter
    linter_name: dotnet-format
    is_formatter: true
    linter_url: https://github.com/dotnet/format
    linter_repo: https://github.com/dotnet/format
    linter_image_url: https://user-images.githubusercontent.com/9797472/61659851-6bbdc880-ac7d-11e9-95f7-d30c7de1a18a.png
    cli_lint_extra_args:
      - "--folder"
      - "--check"
      - "--exclude"
      - "/"
      - "--include"
    cli_lint_fix_arg_name: "--megalinter-fix-flag" # Workaround for PythonBlackOrIsortLinter class behavior
    cli_lint_fix_remove_args:
      - "--check"
    linter_version_cache: "000"
    examples:
      - "dotnet-format --folder --check --exclude / --include myfile.cs"
      - "dotnet-format --folder --exclude / --include myfile.cs" # Fix
    install:
      dockerfile:
        - RUN /usr/share/dotnet/dotnet tool install -g dotnet-format
  # CSharpier
  - class: DotnetLinter
    linter_name: csharpier
    is_formatter: true
    linter_url: https://csharpier.com/
    linter_repo: https://github.com/belav/csharpier
    linter_image_url: https://csharpier.com/img/logo.svg
    linter_rules_configuration_url: https://csharpier.com/docs/Configuration
    linter_rules_ignore_config_url: https://csharpier.com/docs/Ignore
    ignore_file_name: .csharpierignore
    cli_lint_extra_args:
      - "--check"
    cli_lint_fix_remove_args:
      - "--check"
    test_folder: csharp_csharpier
    examples:
      - "dotnet csharpier --check myfile.cs"
      - "dotnet csharpier myfile.cs" # Fix
    install:
      dockerfile:
        - RUN /usr/share/dotnet/dotnet tool install -g csharpier --version 0.16.0
    ide:
      rider:
        - name: csharpier
          url: https://plugins.jetbrains.com/plugin/18243-csharpier
      visual_studio:
        - name: CSharpier
          url: https://marketplace.visualstudio.com/items?itemName=csharpier.CSharpier
      vscode:
        - name: csharpier-vscode
          url: https://marketplace.visualstudio.com/items?itemName=csharpier.csharpier-vscode
